name: Run a test

on:
  push:
  pull_request:

jobs:
 test:
    runs-on: windows-latest
    steps: 
     - uses: actions/checkout@v4

     - uses: actions/setup-node@v4
       with:
         node-version: 16

     - name: Read package-lock.json
       run: |
         npm ci
         cat package-lock.json
         
     - name: Test code with ESLint
       run: npx eslint "./dist/**"
       
     - name: Inno Setup Action (push)
       uses: Minionguyjpro/Inno-Setup-Action@main
       with:
         path: scripts/test.iss
         options: /O+
       
     - name: Inno Setup Action (pull request)
       uses: ./
       with:
         path: scripts\test.iss
       if: ${{ github.event_name == 'pull_request' }}
